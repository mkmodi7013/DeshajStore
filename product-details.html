<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Details</title>

<style>
  body {
    font-family: Arial;
    padding: 20px;
    background: #f7f7f7;
  }
  .box {
    background: white;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 10px #ddd;
    max-width: 500px;
    margin: auto;
  }
  .box img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 10px;
  }
  h2 { margin-top: 15px; }
  .price { font-size: 22px; color: green; margin: 10px 0; }
  .desc { margin-top: 10px; font-size: 15px; color: #666; }
</style>
</head>
<body>
<div id="header"></div>

<script>
  // Load header.html into this page
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header').innerHTML = data;
    })
    .catch(err => console.error('Header load error:', err));
</script>
<div class="box" id="productBox">Loading...</div>

<script type="module">

// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyA6izuR2_oyHbAVhkIVkH0OHj6yAOduD_8",
  authDomain: "apna-kitchen-acdcc.firebaseapp.com",
  projectId: "apna-kitchen-acdcc",
  storageBucket: "apna-kitchen-acdcc.appspot.com",
  messagingSenderId: "129562055761",
  appId: "1:129562055761:web:baa01f9fea6f8eed025470"
};

// Firebase Imports
import { initializeApp } 
from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";

import { 
  getFirestore, doc, getDoc 
} 
from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

// Init
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Get Product ID
const urlParams = new URLSearchParams(window.location.search);
const id = urlParams.get("id");

// Load ONE Product
async function loadProduct() {
  const box = document.getElementById("productBox");

  if (!id) {
    box.innerHTML = "Product ID Missing!";
    return;
  }

  const docRef = doc(db, "products", id);
  const snap = await getDoc(docRef);

  if (!snap.exists()) {
    box.innerHTML = "Product Not Found!";
    return;
  }

  const p = snap.data();

  const img = Array.isArray(p.image) ? p.image[0] : p.image;

  box.innerHTML = `
    <img src="${img}">
    <h2>${p.name}</h2>
    <div class="price">â‚¹${p.price}</div>
    <div class="desc">${p.description || "No description available"}</div>
  `;
}

loadProduct();

</script>

</body>
</html>
